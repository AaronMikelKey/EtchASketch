<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="./styles.css">
    </head>
    <body>
        <button onclick="makeGrid()">Click here to clear grid</button>
        <div class="flex-container" id="container">
            
        </div>
    </body>
    <script>
        var amount = 1080;
        var area = Math.sqrt(amount);
        var colWidth = 100 / area;
        let root = document.documentElement;
        
        

        function makeGrid() {
            var number = prompt("Enter the amount of boxes per row/column : ", "16");
            if (number != null && number <= 64 && number >= 4) {
                amount = number * number;
                area = Math.sqrt(amount);
                colWidth = 100 / area;
                newGrid(amount);
                fixSize(area);
                let boxes = document.getElementsByClassName("box").length;
                for (let i=0;i<boxes;i++) {
                    document.getElementsByClassName("box")[i].style.background = "white";
                }
            }
        }

        

        function newGrid(amount) {
					
					document.getElementById("container").remove();
					let container = document.createElement("div", {class: 'flex-container', id: 'container'})
					let body = document.getElementsByTagName('body')[0];
					body.appendChild(container)
					      for (let i=0;i<amount;i++) {
                const box = document.createElement("div");
                box.setAttribute("class", "box");
                box.setAttribute("onmouseenter", "fill(this)");
                document.getElementById("container").replaceChildren(box);
             }
        } 
        function fixSize(area) {
            root.style.setProperty('--area', area + "fr");
            root.style.setProperty('--colWidth', colWidth + "%");
        }
        function fill(box) {
            box.style.background = 'black';
        }

        

        newGrid(amount); 
        fixSize(area);
    </script>
</html>